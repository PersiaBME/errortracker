!function(){var a,b,c,d,e,f;a=function(){function a(){var a,b,c,d=(navigator.appVersion,navigator.userAgent),e=navigator.appName,f=""+parseFloat(navigator.appVersion),g=parseInt(navigator.appVersion,10);return-1!=(b=d.indexOf("Opera"))?(e="Opera",f=d.substring(b+6),-1!=(b=d.indexOf("Version"))&&(f=d.substring(b+8))):-1!=(b=d.indexOf("MSIE"))?(e="Microsoft Internet Explorer",f=d.substring(b+5)):-1!=(b=d.indexOf("Chrome"))?(e="Chrome",f=d.substring(b+7)):-1!=(b=d.indexOf("Safari"))?(e="Safari",f=d.substring(b+7),-1!=(b=d.indexOf("Version"))&&(f=d.substring(b+8))):-1!=(b=d.indexOf("Firefox"))?(e="Firefox",f=d.substring(b+8)):(a=d.lastIndexOf(" ")+1)<(b=d.lastIndexOf("/"))&&(e=d.substring(a,b),f=d.substring(b+1),e.toLowerCase()==e.toUpperCase()&&(e=navigator.appName)),-1!=(c=f.indexOf(";"))&&(f=f.substring(0,c)),-1!=(c=f.indexOf(" "))&&(f=f.substring(0,c)),g=parseInt(""+f,10),isNaN(g)&&(f=""+parseFloat(navigator.appVersion),g=parseInt(navigator.appVersion,10)),{name:e,version:g}}return{getBrowser:a}}(),b=function(a){function b(b){var c="",e=a.getBrowser().name;"Firefox"===e&&(c=a.getBrowser().version<31?"Below31":"Above31");return"undefined"==typeof d[e+c]?d.defaultParser(b):d[e+c](b)}function c(a){var c={};return"object"==typeof a&&5===a.length?(c.Message=a[0],c.FileName=a[1],c.LineNumber=a[2],c.ColumnNumber=a[3],c.StackTrace=b(a[4].stack)):"object"==typeof a?(c.Message=a.message,c.StackTrace=b(a.stack)):"string"==typeof a&&(c.Message=a),c}var d={Chrome:function(a){return(a+"\n").replace(/^[\s\S]+?\s+at\s+/," at ").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}() ($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}() ($1)").replace(/^(.+) \((.+)\)$/gm,"$1@$2").split("\n").slice(0,-1)},FirefoxBelow31:function(){return"Firefox < 31 does not pass stack trace to error event"},FirefoxAbove31:function(a){return a.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")},defaultParser:function(a){return a.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")}};return{normalizeError:c}}(a),c=function(){function a(a){D=B(D,a),b()}function b(){D.type||(D.type=c()),C=D.maxSize||C}function c(){var a;if("localStorage"in window&&null!==window.localStorage)a="localStorage";else if(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB)a="indexedDb";else var a="cookie";return a}function d(a){E.save[D.type](a)}function e(){E.remove[D.type]()}function f(){E.update[D.type]()}function g(){E.clear[D.type]()}function h(){return E.toJSON[D.type]()}function i(){return E.getSize[D.type]()}function j(a){var b=[];null!==localStorage.getItem(errortracker.getNamespace())&&(b=JSON.parse(localStorage.getItem(errortracker.getNamespace()))),b.push(a),localStorage.setItem(errortracker.getNamespace(),JSON.stringify(b))}function k(a){localStorage.removeItem(a)}function l(){console.log("localStorage: update, not implemented")}function m(){localStorage.clear()}function n(){return JSON.parse(localStorage.getItem(errortracker.getNamespace()))}function o(){return localStorage.getItem(errortracker.getNamespace()).length}function p(){console.log("IndexedDb: save, not implemented")}function q(){console.log("IndexedDb: remove, not implemented")}function r(){console.log("IndexedDb: update, not implemented")}function s(){console.log("IndexedDb: clear, not implemented")}function t(){console.log("IndexedDb: toJSON, not implemented")}function u(){console.log("IndexedDb: getSize, not implemented")}function v(){console.log("Cookie: save, not implemented")}function w(){console.log("Cookie: remove, not implemented")}function x(){console.log("Cookie: update, not implemented")}function y(){console.log("Cookie: clear, not implemented")}function z(){console.log("Cookie: toJSON, not implemented")}function A(){console.log("Cookie: getSize, not implemented")}function B(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}var C=5e5,D={},E={save:{localStorage:j,indexedDb:p,cookie:v},remove:{localStorage:k,indexedDb:q,cookie:w},update:{localStorage:l,indexedDb:r,cookie:x},clear:{localStorage:m,indexedDb:s,cookie:y},toJSON:{localStorage:n,indexedDb:t,cookie:z},getSize:{localStorage:o,indexedDb:u,cookie:A}};return{MAX_STORAGE_SIZE:function(){return C},save:d,remove:e,update:f,clear:g,toJSON:h,getSize:i,initialize:a}}(),d=function(){function a(){for(var a=!1,b=0;b<c.length;b++){try{a=c[b]()}catch(d){continue}break}return a}function b(b,c,d,e){var f=a(),g="POST";f.open(g,b,!0),f.setRequestHeader("Content-type","application/json"),f.onreadystatechange=function(){return 4!=f.readyState?void e():200!=f.status&&304!=f.status?void e():void d(f)},4!=f.readyState&&f.send(JSON.stringify(c))}var c=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];return{send:b}}(),e=function(){var a=function(){if(!(this instanceof a))return new a(arguments);var b=this;b.pending=Array.prototype.slice.call(arguments[0]),b.pending_length=b.pending.length,b.results={length:0},function(){b.pass=function(){b.results[arguments[0]]=arguments[1],b.results.length++,b.results.length===b.pending_length&&b.then.call(b,b.results)}}()};return a.prototype={then:function(){for(this.then=arguments[0];this.pending[0];)this.pending.shift().call(this,this.pass)}},{when:a}}(),function(a,b,c,d,e){function f(a,b,c){this.error=a,this.type=b||"error",this.fieldProperties={},this.callback=c}function g(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}function h(c,d,h){"string"!=typeof c&&console.warn("errortracker only accepts strings as first argument");var i=a.normalizeError(d),k=(new g(i),new f(i,c,h));e.when(function(a){k.fillProperties(a)}).then(function(a){a.length=void 0;var d=a.fieldProperties;return j(d)?void("function"==typeof k.callback&&h()):(C.push(d),b.save(d),q(c,d),m(),void("function"==typeof k.callback&&h()))})}function i(a){var b,c=y({},D,G),d=[],f=this;for(b in c)if(c.hasOwnProperty(b))if("object"==typeof c[b]&&c[b].async===!0)!function(a){d.push(function(b){try{return c[a].value(b)}catch(d){return"Error happened while creating this property"+d.message}})}(b);else if("function"==typeof c[b])try{this.fieldProperties[b]=c[b]()}catch(g){this.fieldProperties[b]="Error happened while creating this property"+g.message}else"function"!=typeof c[b]&&(this.fieldProperties[b]=c[b]);return this.fieldProperties.ViewType=this.type,0===d.length?(y(this.fieldProperties,this.error),void a("fieldProperties",this.fieldProperties)):void e.when.apply(null,d).then(function(b){b.length=void 0,y(f.fieldProperties,b,f.error),a("fieldProperties",f.fieldProperties)})}function j(a){function b(a,b){var c="any"===a._consider?!1:!0,d=[];for(e in a)if(a.hasOwnProperty(e)&&"_"!==e.slice(0,1)){var f=new RegExp(a[e]);d.push(f.test(b[e]))}for(var g=0;g<d.length;g++)c="any"===a._consider?c||d[g]:c&&d[g];return c}var c=!1,d=[];if("object"!=typeof z.exclude||"undefined"==typeof z.exclude.length)return!1;var e,f=z.exclude;for(e in f)f.hasOwnProperty(e)&&d.push(b(f[e],a));for(var g=0;g<d.length;g++)c=c||d[g];return c}function k(a,b){var c=t();c?d.send(z.addToServerDbUrl,c,function(){r(),s(),"function"==typeof a&&a()},function(){"function"==typeof b&&b()}):"function"==typeof a&&a()}function l(a){z=a,b.initialize(a.storage)}function m(){n()&&k()}function n(){return b.getSize()>b.MAX_STORAGE_SIZE()?!0:!1}function o(a){for(var b in a)D[b]=a[b]}function p(){D={}}function q(a,b){if(B){var c=console[a];c.call(console,b)}}function r(){b.clear()}function s(){for(;null!=C.pop(););}function t(){return b.toJSON()}function u(){C.forEach(function(a){console.log(a)})}function v(){return A}function w(){B=!0}function x(){B=!1}function y(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}var z={},A="errortracker",B=!1,C=[],D={},E={LOCAL_STORAGE:"localStorage",INDEXED_DB:"indexedDb",COOKIE:"cookie"},F={LOG:"log",WARN:"warn",FATAL:"error",INFO:"info"},G={DateTime:function(){return new Date},Location:function(){return window.location.href},Agent:navigator.userAgent};f.prototype.fillProperties=i,window.errortracker={initialize:l,getNamespace:v,enableDebugMode:w,disableDebugMode:x,report:h,storages:E,reporters:F,clearStack:s,printStack:u,clearStorage:r,storageToJSON:t,syncStorage:k,addProperties:o,resetPropeties:p}}(b,c,a,d,e),f=void 0}();