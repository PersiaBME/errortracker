!function(){var a,b,c,d,e,f;a=function(){function a(){var a,b,c,d=(navigator.appVersion,navigator.userAgent),e=navigator.appName,f=""+parseFloat(navigator.appVersion),g=parseInt(navigator.appVersion,10);return-1!=(b=d.indexOf("Opera"))?(e="Opera",f=d.substring(b+6),-1!=(b=d.indexOf("Version"))&&(f=d.substring(b+8))):-1!=(b=d.indexOf("MSIE"))?(e="Microsoft Internet Explorer",f=d.substring(b+5)):-1!=(b=d.indexOf("Chrome"))?(e="Chrome",f=d.substring(b+7)):-1!=(b=d.indexOf("Safari"))?(e="Safari",f=d.substring(b+7),-1!=(b=d.indexOf("Version"))&&(f=d.substring(b+8))):-1!=(b=d.indexOf("Firefox"))?(e="Firefox",f=d.substring(b+8)):(a=d.lastIndexOf(" ")+1)<(b=d.lastIndexOf("/"))&&(e=d.substring(a,b),f=d.substring(b+1),e.toLowerCase()==e.toUpperCase()&&(e=navigator.appName)),-1!=(c=f.indexOf(";"))&&(f=f.substring(0,c)),-1!=(c=f.indexOf(" "))&&(f=f.substring(0,c)),g=parseInt(""+f,10),isNaN(g)&&(f=""+parseFloat(navigator.appVersion),g=parseInt(navigator.appVersion,10)),{name:e,version:g}}return{getBrowser:a}}(),b=function(a){function b(b){var c="",e=a.getBrowser().name;"Firefox"===e&&(c=a.getBrowser().version<31?"Below31":"Above31");return"undefined"==typeof d[e+c]?d.defaultParser(b):d[e+c](b)}function c(a){var c={};return"object"==typeof a&&5===a.length?(c.Message=a[0],c.FileName=a[1],c.LineNumber=a[2],c.ColumnNumber=a[3],c.StackTrace=b(a[4].stack)):"object"==typeof a?(c.Message=a.message,c.StackTrace=b(a.stack)):"string"==typeof a&&(c.Message=a),c}var d={Chrome:function(a){return(a+"\n").replace(/^[\s\S]+?\s+at\s+/," at ").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}() ($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}() ($1)").replace(/^(.+) \((.+)\)$/gm,"$1@$2").split("\n").slice(0,-1)},FirefoxBelow31:function(){return"Firefox < 31 does not pass stack trace to error event"},FirefoxAbove31:function(a){return a.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")},defaultParser:function(a){return a.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")}};return{normalizeError:c}}(a),c=function(){function a(a){D=B(D,a),b()}function b(){D.type||(D.type=c())}function c(){var a;if("localStorage"in window&&null!==window.localStorage)a="localStorage";else if(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB)a="indexedDb";else var a="cookie";return a}function d(a){E.save[D.type](a)}function e(){E.remove[D.type]()}function f(){E.update[D.type]()}function g(){E.clear[D.type]()}function h(){return E.toJSON[D.type]()}function i(){return E.getSize[D.type]()}function j(a){var b=[];null!==localStorage.getItem(errortracker.getNamespace())&&(b=JSON.parse(localStorage.getItem(errortracker.getNamespace()))),b.push(a),localStorage.setItem(errortracker.getNamespace(),JSON.stringify(b))}function k(a){localStorage.removeItem(a)}function l(){console.log("localStorage: update, not implemented")}function m(){localStorage.clear()}function n(){return JSON.parse(localStorage.getItem(errortracker.getNamespace()))}function o(){return localStorage.getItem(errortracker.getNamespace()).length}function p(){console.log("IndexedDb: save, not implemented")}function q(){console.log("IndexedDb: remove, not implemented")}function r(){console.log("IndexedDb: update, not implemented")}function s(){console.log("IndexedDb: clear, not implemented")}function t(){console.log("IndexedDb: toJSON, not implemented")}function u(){console.log("IndexedDb: getSize, not implemented")}function v(){console.log("Cookie: save, not implemented")}function w(){console.log("Cookie: remove, not implemented")}function x(){console.log("Cookie: update, not implemented")}function y(){console.log("Cookie: clear, not implemented")}function z(){console.log("Cookie: toJSON, not implemented")}function A(){console.log("Cookie: getSize, not implemented")}function B(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}var C=5e5,D={},E={save:{localStorage:j,indexedDb:p,cookie:v},remove:{localStorage:k,indexedDb:q,cookie:w},update:{localStorage:l,indexedDb:r,cookie:x},clear:{localStorage:m,indexedDb:s,cookie:y},toJSON:{localStorage:n,indexedDb:t,cookie:z},getSize:{localStorage:o,indexedDb:u,cookie:A}};return{MAX_STORAGE_SIZE:C,save:d,remove:e,update:f,clear:g,toJSON:h,getSize:i,initialize:a}}(),d=function(){function a(){for(var a=!1,b=0;b<c.length;b++){try{a=c[b]()}catch(d){continue}break}return a}function b(b,c,d,e){var f=a(),g="POST";f.open(g,b,!0),f.setRequestHeader("Content-type","application/json"),f.onreadystatechange=function(){return 4!=f.readyState?void e():200!=f.status&&304!=f.status?void e():void d(f)},4!=f.readyState&&f.send(JSON.stringify(c))}var c=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];return{send:b}}(),e=function(){var a=function(){if(!(this instanceof a))return new a(arguments);var b=this;b.pending=Array.prototype.slice.call(arguments[0]),b.pending_length=b.pending.length,b.results={length:0},function(){b.pass=function(){b.results[arguments[0]]=arguments[1],b.results.length++,b.results.length===b.pending_length&&b.then.call(b,b.results)}}()};return a.prototype={then:function(){for(this.then=arguments[0];this.pending[0];)this.pending.shift().call(this,this.pass)}},{when:a}}(),function(a,b,c,d,e){function f(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}function g(a){for(var b in a)this[b]=a[b]}function h(a,b,c){this.error=a,this.type=b||"error",this.fieldProperties={},this.callback=c}function i(){E=!0}function j(){E=!1}function k(){return b.getSize()>b.MAX_STORAGE_SIZE?!0:!1}function l(){k()&&w()}function m(a,b){if(E){var c=console[a];c.call(console,b)}}function n(a){var b=f({},C,D),c=[],d=this;for(p in b)if(b.hasOwnProperty(p))if("object"==typeof b[p]&&b[p].async===!0)!function(a){c.push(function(c){try{return b[a].value(c)}catch(d){return"Error happened while creating this property"+d.message}})}(p);else if("function"==typeof b[p])try{this.fieldProperties[p]=b[p]()}catch(g){this.fieldProperties[p]="Error happened while creating this property"+g.message}else"function"!=typeof b[p]&&(this.fieldProperties[p]=b[p]);return 0===c.length?(f(this.fieldProperties,this.error),void a("fieldProperties",this.fieldProperties)):void e.when.apply(null,c).then(function(b){b.length=void 0,f(d.fieldProperties,b,d.error),a("fieldProperties",d.fieldProperties)})}function o(a){function b(a,b){var c="any"===a._consider?!1:!0,d=[];for(e in a)if(a.hasOwnProperty(e)&&"_"!==e.slice(0,1)){var f=new RegExp(a[e]);d.push(f.test(b[e]))}for(var g=0;g<d.length;g++)c="any"===a._consider?c||d[g]:c&&d[g];return c}var c=!1,d=[];if("object"!=typeof A.exclude||"undefined"==typeof A.exclude.length)return!1;var e,f=A.exclude;for(e in f)f.hasOwnProperty(e)&&d.push(b(f[e],a));for(var g=0;g<d.length;g++)c=c||d[g];return c}function q(c,d,f){"string"!=typeof c&&console.warn("errortracker only accepts strings as first argument");var i=a.normalizeError(d),j=(new g(i),new h(i,c,f));e.when(function(a){j.fillProperties(a)}).then(function(a){a.length=void 0;var d=a.fieldProperties;return o(d)?void("function"==typeof j.callback&&f()):(F.push(d),b.save(d),m(c,d),l(),void("function"==typeof j.callback&&f()))})}function r(){for(;null!=F.pop(););}function s(){F.forEach(function(a){console.log(a)})}function t(){return B}function u(){b.clear()}function v(){return b.toJSON()}function w(a,b){var c=v();c?d.send(A.addToServerDbUrl,c,function(){u(),r(),"function"==typeof a&&a()},function(){"function"==typeof b&&b()}):"function"==typeof a&&a()}function x(a){for(var b in a)C[b]=a[b]}function y(a){for(var b in a)this.properties[b]=a[b]}function z(a){A=a,b.initialize(a.storage)}h.prototype.addProperties=y,h.prototype.fillProperties=n;var A={},B="errortracker",C={},D={DateTime:function(){return new Date},Location:function(){return window.location.href},Agent:navigator.userAgent},E=!1,F=[],G={LOG:"log",WARN:"warn",FATAL:"error",INFO:"info"},H={LOCAL_STORAGE:"localStorage",INDEXED_DB:"indexedDb",COOKIE:"cookie"};window.errortracker={initialize:z,getNamespace:t,enableDebugMode:i,disableDebugMode:j,report:q,storages:H,reporters:G,clearStack:r,printStack:s,clearStorage:u,storageToJSON:v,syncStorage:w,addProperties:x}}(b,c,a,d,e),f=void 0}();