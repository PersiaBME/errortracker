!function(){var a,b,c,d,e,f;a=function(){function a(){var a,b,c,d=(navigator.appVersion,navigator.userAgent),e=navigator.appName,f=""+parseFloat(navigator.appVersion),g=parseInt(navigator.appVersion,10);return-1!=(b=d.indexOf("Opera"))?(e="Opera",f=d.substring(b+6),-1!=(b=d.indexOf("Version"))&&(f=d.substring(b+8))):-1!=(b=d.indexOf("MSIE"))?(e="Microsoft Internet Explorer",f=d.substring(b+5)):-1!=(b=d.indexOf("Chrome"))?(e="Chrome",f=d.substring(b+7)):-1!=(b=d.indexOf("Safari"))?(e="Safari",f=d.substring(b+7),-1!=(b=d.indexOf("Version"))&&(f=d.substring(b+8))):-1!=(b=d.indexOf("Firefox"))?(e="Firefox",f=d.substring(b+8)):(a=d.lastIndexOf(" ")+1)<(b=d.lastIndexOf("/"))&&(e=d.substring(a,b),f=d.substring(b+1),e.toLowerCase()==e.toUpperCase()&&(e=navigator.appName)),-1!=(c=f.indexOf(";"))&&(f=f.substring(0,c)),-1!=(c=f.indexOf(" "))&&(f=f.substring(0,c)),g=parseInt(""+f,10),isNaN(g)&&(f=""+parseFloat(navigator.appVersion),g=parseInt(navigator.appVersion,10)),{name:e,version:g}}return{getBrowser:a}}(),b=function(a){function b(b){var c="",e=a.getBrowser().name;"Firefox"===e&&(c=a.getBrowser().version<31?"Below31":"Above31");return"undefined"==typeof d[e+c]?d.defaultParser(b):d[e+c](b)}function c(a){var c={};return"object"==typeof a&&5===a.length?(c.Message=a[0],c.FileName=a[1],c.LineNumber=a[2],c.ColumnNumber=a[3],c.StackTrace=b(a[4].stack)):"object"==typeof a?(c.Message=a.message,c.StackTrace=b(a.stack)):"string"==typeof a&&(c.Message=a),c}var d={Chrome:function(a){return(a+"\n").replace(/^[\s\S]+?\s+at\s+/," at ").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}() ($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}() ($1)").replace(/^(.+) \((.+)\)$/gm,"$1@$2").split("\n").slice(0,-1)},FirefoxBelow31:function(){return"Firefox < 31 does not pass stack trace to error event"},FirefoxAbove31:function(a){return a.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")},defaultParser:function(a){return a.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")}};return{normalizeError:c}}(a),c=function(){var a=function(){if(!(this instanceof a))return new a(arguments);var b=this;b.pending=Array.prototype.slice.call(arguments[0]),b.pending_length=b.pending.length,b.results={length:0},function(){b.pass=function(){b.results[arguments[0]]=arguments[1],b.results.length++,b.results.length===b.pending_length&&b.then.call(b,b.results)}}()};return a.prototype={then:function(){for(this.then=arguments[0];this.pending[0];)this.pending.shift().call(this,this.pass)}},{when:a}}(),d=function(a){function b(a){F=D(F,a),c()}function c(){F.type||(F.type=d()),E=F.maxSize||E}function d(){var a;if("localStorage"in window&&null!==window.localStorage)a="localStorage";else if(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB)a="indexedDb";else var a="cookie";return a}function e(b){a.when(function(a){k(a)}).then(function(a){a.storageContentSize>E?b("storageStatus","full"):b("storageStatus","notFull")})}function f(a,b){G.save[F.type](a,b)}function g(){G.remove[F.type]()}function h(){G.update[F.type]()}function i(){G.clear[F.type]()}function j(a){return G.toJSON[F.type](a)}function k(a){return G.getSize[F.type](a)}function l(a,b){var c=[];if(b=b||"",null!==localStorage.getItem(errortracker.getNamespace())&&(c=JSON.parse(localStorage.getItem(errortracker.getNamespace()))),a instanceof Array)for(var d=0;d<a.length;d++)c.push(a[d]);else c.push(a);localStorage.setItem(errortracker.getNamespace()+b,JSON.stringify(c))}function m(a){localStorage.removeItem(a)}function n(){console.log("localStorage: update, not implemented")}function o(){localStorage.clear()}function p(a){return a=a||errortracker.getNamespace(),JSON.parse(localStorage.getItem(a))}function q(a){var b=localStorage.getItem(errortracker.getNamespace())||"";a("storageContentSize",b.length||0)}function r(){console.log("IndexedDb: save, not implemented")}function s(){console.log("IndexedDb: remove, not implemented")}function t(){console.log("IndexedDb: update, not implemented")}function u(){console.log("IndexedDb: clear, not implemented")}function v(){console.log("IndexedDb: toJSON, not implemented")}function w(){console.log("IndexedDb: getSize, not implemented")}function x(){console.log("Cookie: save, not implemented")}function y(){console.log("Cookie: remove, not implemented")}function z(){console.log("Cookie: update, not implemented")}function A(){console.log("Cookie: clear, not implemented")}function B(){console.log("Cookie: toJSON, not implemented")}function C(){console.log("Cookie: getSize, not implemented")}function D(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}var E=5e5,F={},G={save:{localStorage:l,indexedDb:r,cookie:x},remove:{localStorage:m,indexedDb:s,cookie:y},update:{localStorage:n,indexedDb:t,cookie:z},clear:{localStorage:o,indexedDb:u,cookie:A},toJSON:{localStorage:p,indexedDb:v,cookie:B},getSize:{localStorage:q,indexedDb:w,cookie:C}};return{MAX_STORAGE_SIZE:function(){return E},save:f,remove:g,update:h,clear:i,toJSON:j,getSize:k,getStorageStatus:e,initialize:b}}(c),e=function(){function a(){for(var a=!1,b=0;b<c.length;b++){try{a=c[b]()}catch(d){continue}break}return a}function b(b,c,d,e){var f=a(),g="POST";f.open(g,b,!0),f.setRequestHeader("Content-type","application/json"),f.onreadystatechange=function(){return 4!=f.readyState?void e():200!=f.status&&304!=f.status?void e():void d(f)},4!=f.readyState&&f.send(JSON.stringify(c))}var c=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];return{send:b}}(),function(a,b,c,d,e){function f(a,b,c){this.error=a,this.type=b||"error",this.fieldProperties={},this.callback=c}function g(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}function h(c,d,h){"string"!=typeof c&&console.warn("errortracker only accepts strings as first argument");var j=a.normalizeError(d),k=(new g(j),new f(j,c,h));e.when(function(a){k.fillProperties(a)}).then(function(a){a.length=void 0;var d=a.fieldProperties;return m(d)?void("function"==typeof k.callback&&h()):(D.push(d),b.save(d),r(c,d),F=!0,i(),void("function"==typeof k.callback&&h()))})}function i(){e.when(function(a){b.getStorageStatus(a)}).then(function(a){j(a.storageStatus)})}function j(a){"full"===a?(!E&&F&&(console.log("storage full!"),E=!0,e.when(k).then(function(){var a=b.toJSON(w()+"_temp");d.send(A.addToServerDbUrl,a,function(){E=!1,i()},function(){console.log("failed to push temp storage to the server")})})),console.log("storage busy...")):(console.log("storage has empty space."),E=!1,F=!1)}function k(a){var c=b.toJSON();s(),F=!1,b.save(c,"_temp"),a()}function l(a){var b,c=z({},G,J),d=[],f=this;for(b in c)if(c.hasOwnProperty(b))if("object"==typeof c[b]&&c[b].async===!0)!function(a){d.push(function(b){try{return c[a].value(b)}catch(d){return"Error happened while creating this property"+d.message}})}(b);else if("function"==typeof c[b])try{this.fieldProperties[b]=c[b]()}catch(g){this.fieldProperties[b]="Error happened while creating this property"+g.message}else"function"!=typeof c[b]&&(this.fieldProperties[b]=c[b]);return this.fieldProperties.ViewType=this.type,0===d.length?(z(this.fieldProperties,this.error),void a("fieldProperties",this.fieldProperties)):void e.when.apply(null,d).then(function(b){b.length=void 0,z(f.fieldProperties,b,f.error),a("fieldProperties",f.fieldProperties)})}function m(a){function b(a,b){var c="any"===a._consider?!1:!0,d=[];for(e in a)if(a.hasOwnProperty(e)&&"_"!==e.slice(0,1)){var f=new RegExp(a[e]);d.push(f.test(b[e]))}for(var g=0;g<d.length;g++)c="any"===a._consider?c||d[g]:c&&d[g];return c}var c=!1,d=[];if("object"!=typeof A.exclude||"undefined"==typeof A.exclude.length)return!1;var e,f=A.exclude;for(e in f)f.hasOwnProperty(e)&&d.push(b(f[e],a));for(var g=0;g<d.length;g++)c=c||d[g];return c}function n(a,b){var c=u();c?d.send(A.addToServerDbUrl,c,function(){s(),t(),"function"==typeof a&&a()},function(){"function"==typeof b&&b()}):"function"==typeof a&&a()}function o(a){A=a,b.initialize(a.storage)}function p(a){for(var b in a)G[b]=a[b]}function q(){G={}}function r(a,b){if(C){var c=console[a];c.call(console,b)}}function s(){b.clear()}function t(){for(;null!=D.pop(););}function u(){return b.toJSON()}function v(){D.forEach(function(a){console.log(a)})}function w(){return B}function x(){C=!0}function y(){C=!1}function z(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}var A={},B="errortracker",C=!1,D=[],E=!1,F=!1,G={},H={LOCAL_STORAGE:"localStorage",INDEXED_DB:"indexedDb",COOKIE:"cookie"},I={LOG:"log",WARN:"warn",FATAL:"error",INFO:"info"},J={DateTime:function(){return new Date},Location:function(){return window.location.href},Agent:navigator.userAgent};f.prototype.fillProperties=l,window.errortracker={initialize:o,getNamespace:w,enableDebugMode:x,disableDebugMode:y,report:h,storages:H,reporters:I,clearStack:t,printStack:v,clearStorage:s,storageToJSON:u,syncStorage:n,addProperties:p,resetPropeties:q}}(b,d,a,e,c),f=void 0}();